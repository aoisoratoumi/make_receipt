
---

# 🧾 Make Receipt: 領収書PDF自動作成ツール

PDFのテンプレートファイルに、宛名、金額、発行日、摘要を合成して領収書（本紙・控え）を自動生成するツールです。

Pythonの高速パッケージマネージャー **`uv`** を利用して、簡単に環境構築と実行が可能です。

---

## ✨ 主な機能

* **GUI入力**: `TkEasyGUI` を採用し、誰でも簡単に操作可能。
* **PDF合成**: 既存のPDFデザインを維持したまま、指定位置にテキストをマージ。
* **自動計算**: 税抜金額の入力から消費税（10%）と税込合計を自動算出。
* **リアルタイム整形**: 金額入力時に3桁区切りのカンマを自動挿入。
* **本紙・控え同時作成**: 1枚のPDF内に両方のデータを一括で書き込み。

---

## 🛠 セットアップと実行方法

このプロジェクトは [uv](https://github.com/astral-sh/uv) を使用して管理されています。

### 1. 前提条件

* **OS**: Windows (標準でMSゴシックフォントを使用するため)
* **Python**: 3.12 以上
* **uv**: インストール済みであること

### 2. 環境の作成

プロジェクトのルートディレクトリ（`pyproject.toml` がある場所）で以下のコマンドを実行すると、仮想環境が作成され、依存ライブラリが自動的にインストールされます。

```bash
uv sync

```

### 3. アプリの起動

環境構築後、以下のコマンドでアプリケーションを起動できます。

```bash
uv run receipt_gui.py

```

---

## 🚀 使い方

1. **テンプレートの準備**
* 実行ファイルと同じフォルダに **`receipt_template.pdf`** を配置してください。


2. **データの入力**
* 起動した画面で「宛名」「発行日」「税抜金額」「摘要」を入力します。


3. **PDFの保存**
* 「作成」ボタンを押し、保存先のファイル名（例：`領収書_株式会社〇〇御中.pdf`）を指定して保存します。



---

## 📂 ファイル構成

| ファイル名 | 役割 |
| --- | --- |
| `receipt_gui.py` | GUIインターフェースとバリデーション（起動用ファイル）。 |
| `make_receipt.py` | PDF生成のメインロジック。座標設定や消費税計算を担当。 |
| `pyproject.toml` | プロジェクト設定と依存ライブラリ（`pypdf`, `reportlab` 等）の定義。 |
| `uv.lock` | 依存関係のバージョン固定ファイル。 |
| `receipt_template.pdf` | **（各自用意）** 領収書のベースとなるPDF台紙。 |

---

## ⚙️ カスタマイズ

### 印字位置（座標）の調整

テンプレートのデザインに合わせて、`make_receipt.py` 内の `LAYOUT_CONFIG` を編集することで印字位置を微調整できます。単位は mm です。

```python
LAYOUT_CONFIG = {
    "original": { # 本紙の設定
        "name": (20, 240, 14), # (x座標, y座標, フォントサイズ)
        ...
    },
    "copy": { # 控えの設定
        "name": (20, 105, 14),
        ...
    }
}

```

### 消費税率の変更

`make_receipt.py` の `TAX_RATE` の値を書き換えることで調整可能です。

```python
TAX_RATE = 0.10  # 10%

```

---

## ⚠️ 注意事項

* **フォントパス**: Windows標準の `C:/Windows/Fonts/msgothic.ttc` を参照しています。他のOSで利用する場合は、`make_receipt.py` 内の `FONT_PATH` を環境に合わせて書き換えてください。
* **ファイルロック**: 生成先のPDFファイルを閲覧ソフト（Acrobat等）で開いたままだと、上書き保存に失敗します。

---
